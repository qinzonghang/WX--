<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export2.dtd">
<en-export export-date="20180113T140416Z" application="Evernote/Windows" version="6.x">
<note><title>9、视图层——WXML数据绑定</title><content><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">

<en-note><div><span style="font-size: 24px;"><b>9、视图层——WXML数据绑定</b></span></div><div><hr/></div><div><span style="font-size: 24px;"><b>（1）组成</b></span></div><div><hr/></div><ul><li>框架的视图层由 WXML 与 WXSS 编写，由组件来进行展示</li><li>将逻辑层的数据反应成视图，同时将视图层的事件发送给逻辑层</li><li><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">WXML</span>(WeiXin Markup language) 用于描述页面的结构</li><li><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">WXS</span>(WeiXin Script) 是小程序的一套脚本语言，结合 WXML，可以构建出页面的结构</li><li><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">WXSS</span>(WeiXin Style Sheet) 用于描述页面的样式。</li><li>组件(<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">Component</span>)是视图的基本组成单元</li></ul><div><br/></div><div><span style="font-size: 24px;"><b>（2）WXML数据绑定</b></span></div><div><hr/></div><ul><li>数据绑定使用 Mustache 语法（双大括号）将变量包起来，{{}}先支持一下几种形式</li><li>简单绑定</li></ul><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;view&gt; <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{ message }}</span> &lt;/view&gt; &nbsp;//绑定内容</div><div><br/></div><div>&lt;view <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">id=&quot;item-{{id}}&quot;</span>&gt; &lt;/view&gt; //绑定组件属性(需要在双引号之内)</div><div><br/></div><div>&lt;view wx:if=&quot;<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{condition}}</span>&quot;&gt; &lt;/view&gt;//控制属性(需要在双引号之内)</div><div><br/></div><div>&lt;checkbox <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">checked=&quot;{{false}}&quot;</span>&gt; &lt;/checkbox&gt;//关键字(需要在双引号之内)</div></div><ul><li>运算</li></ul><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;view hidden=&quot;<span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{flag ? true : false}}</span></b></span>&quot;&gt; Hidden &lt;/view&gt; //三元运算</div><div><br/></div><div>&lt;view&gt; <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{a + b}} + {{c}} + d</span> &lt;/view&gt; //算术运算 内容为 3 + 3 + d</div><div><br/></div><div>&lt;view wx:if=&quot;{{length &gt; 5}}&quot;&gt; &lt;/view&gt;//逻辑判断</div><div><br/></div><div>&lt;view&gt;{{&quot;hello&quot; + name}}&lt;/view&gt;//字符串运算</div><div><br/></div><div>&lt;view&gt;{{object.key}} {{array[0]}}&lt;/view&gt;//数据路径运算</div><div><br/></div></div><ul><li>组合</li></ul><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;view wx:for=&quot;{{<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">[zero, 1, 2, 3, 4]</span>}}&quot;&gt; {{item}} &lt;/view&gt;//组合数组<br/></div></div><ul><li>组合对象</li></ul><div><br/></div><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>&lt;template is=&quot;objectCombine&quot; <span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">data=&quot;{{for: a, bar: b}}&quot;</span></b></span>&gt;&lt;/template&gt;</div><div>Page({</div><div>&nbsp; data: {</div><div>&nbsp; a: 1,</div><div>&nbsp; b: 2</div><div>&nbsp; }</div><div>})</div><div><br/></div><div>最终组合成的对象是 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{for: 1, bar: 2}</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div>//<span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">...</span></b></span>将一个对象展开</div><div>&lt;template is=&quot;objectCombine&quot; <span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">data=&quot;{{...obj1, ...obj2, e: 5}}</span></b></span>&quot;&gt;&lt;/template&gt;</div><div>Page({</div><div>&nbsp; data: {</div><div>&nbsp; obj1: {</div><div>&nbsp; a: 1,</div><div>&nbsp; b: 2</div><div>&nbsp; },</div><div>&nbsp; obj2: {</div><div>&nbsp; c: 3,</div><div>&nbsp; d: 4</div><div>&nbsp; }</div><div>&nbsp; }</div><div>})</div><div>最终组合成的对象是 <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{a: 1, b: 2, c: 3, d: 4, e: 5}</span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;"><br/></span></div><div>如果对象的 key 和 value 相同，也可以间接地表达</div><div>&lt;template is=&quot;objectCombine&quot; data=&quot;<span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{foo, bar}}</span></b></span>&quot;&gt;&lt;/template&gt;</div><div>Page({</div><div>&nbsp; data: {</div><div>&nbsp; foo: &apos;my-foo&apos;,</div><div>&nbsp; bar: &apos;my-bar&apos;</div><div>&nbsp; }</div><div>})</div><div>最终组合成的对象是 {foo: &apos;my-foo&apos;, bar:&apos;my-bar&apos;}</div><div><br/></div><div><br/></div><div><br/></div><div>但是如有存在变量名相同的情况，<span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">后边的会覆盖前面</span></b></span></div><div>&lt;template is=&quot;objectCombine&quot; data=&quot;{{...obj1, ...obj2, a, c: 6}}&quot;&gt;&lt;/template&gt;</div><div>Page({</div><div>&nbsp; data: {</div><div>&nbsp; obj1: {</div><div>&nbsp; a: 1,</div><div>&nbsp; b: 2</div><div>&nbsp; },</div><div>&nbsp; obj2: {</div><div>&nbsp; <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">b: 3,</span></div><div>&nbsp; c: 4</div><div>&nbsp; },</div><div>&nbsp; a: 5</div><div>&nbsp; }</div><div>})</div><div>最终组合成的对象是 {a: 5, <span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">b: 3</span>, c: 6}</div><div><br/></div><div><br/></div><div><br/></div><div>花括号和引号之间如果有空格，将最终被解析成为字符串</div><div>&lt;view wx:for=&quot;{{[1,2,3]}} &quot;&gt;</div><div>&nbsp; {{item}}</div><div>&lt;/view&gt;</div><div><br/></div><div>等同于</div><div>&lt;view wx:for=&quot;<span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">{{[1,2,3] + &apos; &apos;}}</span>&quot;&gt;</div><div>&nbsp; {{item}}</div><div>&lt;/view&gt;</div></div><div><br/></div></en-note>]]></content><created>20171229T065948Z</created><updated>20171229T075516Z</updated><note-attributes><author>372251027@qq.com</author><source>desktop.win</source><source-url>https://mp.weixin.qq.com/debug/wxadoc/dev/framework/view/</source-url><source-application>evernote.win32</source-application></note-attributes></note></en-export>
