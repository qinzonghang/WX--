<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-export SYSTEM "http://xml.evernote.com/pub/evernote-export2.dtd">
<en-export export-date="20180113T140408Z" application="Evernote/Windows" version="6.x">
<note><title>8、逻辑层—— 文件作用域和模块化</title><content><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE en-note SYSTEM "http://xml.evernote.com/pub/enml2.dtd">

<en-note><div><span style="font-size: 32px;"><b>8、</b></span><span style="font-size: 32px;"><b>逻辑层——</b></span> <span style="font-size: 32px;"><b>文件作用域和模块化</b></span></div><hr/><div><br/></div><div><span style="font-size: 24px;"><b>（1）文件作用域</b></span></div><hr/><ul><li>在 JavaScript 文件中声明的变量和函数只在该文件中有效</li><li>不同的文件中可以声明相同名字的变量和函数，不会互相影响</li><li>app中声明全局变量</li></ul><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>// app.js<br/>
App({<br/>
&nbsp; globalData: 1<br/>
})</div></div><ul><li>其他js中直接使用</li></ul><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>// a.js</div><div>// The localValue can only be used in file a.js.</div><div>var localValue = &apos;a&apos;</div><div>//&nbsp;Get the app instance.</div><div>var app = <span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">getApp()</span></b></span></div><div>// Get the global data and change it.<br/><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">app.globalData++</span></div></div><div><br/></div><div><span style="font-size: 24px;"><b>（2）模块化</b></span></div><hr/><ul><li>可以将一些公共的代码抽离成为一个单独的 js 文件，作为一个模块</li><li>模块只有通过 module.exports 或者 exports 才能对外暴露接口</li><li><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">exports 是 module.exports 的一个引用</span>，因此在模块里边随意更改 exports 的指向会造成未知的错误</li><li>所以更推荐开发者采用 module.exports 来暴露模块接口，除非你已经清晰知道这两者的关系</li><li>小程序目前不支持直接引入 node_modules , 开发者需要使用到 node_modules 时候建议拷贝出相关的代码到小程序的目录中</li><li>require 暂时不支持绝对路径</li></ul><div><br/></div><ul><li>封装的代码</li></ul><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>function sayHello(name){</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&apos;Hello &apos;+name)</div><div>}</div><div><br/></div><div>function sayBye(name) {</div><div>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;console.log(&apos;Bye &apos;+name)</div><div>}</div><div><span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">module.exports.hello = sayHello</span></b></span></div><div><span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">exports.bye = sayBye</span></b></span></div></div><ul><li>调用</li></ul><div style="-en-codeblock: true; box-sizing: border-box; padding: 8px; font-family: Monaco, Menlo, Consolas, &quot;Courier New&quot;, monospace; font-size: 12px; color: rgb(51, 51, 51); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; background-color: rgb(251, 250, 248); border: 1px solid rgba(0, 0, 0, 0.14902); background-position: initial initial; background-repeat: initial initial;"><div>//index.js</div><div><br/></div><div><span style="color: rgb(255, 0, 0);"><b><span style="background-color: rgb(255, 250, 165);-evernote-highlight:true;">var common = require(&apos;../../utils/common.js&apos;)</span></b></span></div><div>Page({</div><div style="margin-left:40px;">onLoad: function () {</div><div style="margin-left:40px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.bye(&apos;Tom&apos;)</div><div style="margin-left:40px;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;common.hello(&apos;Jack&apos;)</div><div style="margin-left:40px;">},</div><div>})</div></div><div><br/></div></en-note>]]></content><created>20171229T064130Z</created><updated>20171229T065907Z</updated><note-attributes><author>372251027@qq.com</author><source>desktop.win</source><source-url>https://mp.weixin.qq.com/debug/wxadoc/dev/framework/app-service/module.html</source-url><source-application>evernote.win32</source-application></note-attributes></note></en-export>
